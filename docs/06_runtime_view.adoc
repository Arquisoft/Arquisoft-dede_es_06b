[[section-runtime-view]]
== Runtime View


=== <Runtime Scenario 1>

Un usuario se registra o inicia sesión en la aplicación.

[plantuml,"06_runtime_registro",png]
----
actor Bob
actor Alice
participant DeDe
database bd as "Base de datos"
Bob -> DeDe: Bob se registra
DeDe -> bd: Comprobación datos introducidos
DeDe <-- bd: Validación
DeDe -> bd: Envía petición para almacenar los datos del usuario
DeDe <-- bd: Almacena los datos
Bob <-- DeDe: Confirmación registro realizado con éxito
Alice -> DeDe: Alice inicia sesión 
DeDe -> bd: Consulta datos de Alice
DeDe <-- bd: Confirmación de datos
Alice <-- DeDe: Sesión iniciada
----
=== <Runtime Scenario 2>
Búsqueda de artículos mediante los filtros proporcionados en la aplicación.
[plantuml,"06_runtime_filtro",png]
----
actor Bob
participant DeDe
database DataBase as "DataBase"
Bob -> DeDe: Pulsa "Log-In"
DeDe--> Bob: Pregunta al usuario los datos
Bob -> DeDe: Inserta los datos
DeDe-> DataBase: Comprueba que los datos sean correctos
DataBase --> DeDe: Confirma que son correctos
DeDe-> DeDe: Entra a la web
Bob -> DeDe: Pulsa "Filtrar"
DeDe-> DeDe: Muestra los filtros
Bob -> DeDe: Pulsa "Sudaderas"
DeDe-> DataBase: Pide la lista de sudaderas
DataBase --> DeDe: Devuelve la lista de sudaderas
DeDe-> DeDe: Muestra solo las sudaderas
----

=== <Runtime Scenario 3>
El usuario inicia sesión para poder realizar un pedido.
[plantuml,"06_runtime_pedido",png]
----
actor Cliente
participant DeDe
participant Pod
database DataBase as "DataBase"
Cliente-> DeDe: Log-in
DeDe-> DataBase: Comprueba datos del registro
DataBase --> DeDe: Comprueba datos
DeDe --> Cliente: Log-in
Cliente-> DeDe: Añadir producto
DeDe-> DataBase: Comprueba stock
DataBase --> DeDe: Notifica comprobación
DeDe-> DeDe: Añade producto al carrito
Cliente -> DeDe: Realizar pedido
DeDe -> DataBase: Añade y actualiza datos del pedido
Cliente-> Pod: Inicia sesión en su pod
Pod--> DeDe: Proporciona su token
Cliente->DeDe: Solicita guardar la dirección
DeDe -> Pod: Guarda la dirección
Pod--> DeDe: Verifica y notifica
DeDe--> Cliente: Verifica y notifica
DeDe--> Cliente: Notifica la realización del pedido
----
=== <Runtime Scenario 4>
El cliente inicia sesión para ver el listado de pedidos que ha realizado.
[plantuml,"06_runtime_verPedido",png]
----
actor Bob
participant DeDe
database database
Bob -> DeDe: Pulsa Log In
DeDe -> Bob: Pide al usuario sus datos de registro
Bob -> DeDe: Rellena los campos y accede
DeDe -> database: Comprueba que el usuario y contraseña son correctos
DeDe -> DeDe: Bob es redireccionado a la home page
Bob -> DeDe: Bob hace click en "Mis pedidos"
database <- DeDe: query para obtener lista de pedidos con id_user=bob
database -> DeDe: lista de pedidos de id_user=bob
DeDe -> DeDe: Bob es redireccionado a la vista de pedidos
----
